---
spectrum128k:
  address: 0x0c41
  routine: PO-SEARCH

spectrum4:
  routine: po_search

tests:
  - name: with custom table
    spectrum4:
      setup:
        registers:
          x3:
            value: 0x3
          x4:
            asm: table
      effects:
        registers:
          x4:
            asm: telephone
          x5:
            value: "'t'"
          x6:
            value: 0
      asm: |-
        .align 3
        table:
          .asciz "hello"
          .asciz "dog"
          .asciz "cat"
          .asciz "banana"
        telephone:
          .asciz "telephone"
          .asciz "supper"
  - name: with keywords
    spectrum4:
      setup:
        registers:
          x3:
            value: 0x22
          x4:
            value: tkn_table
      effects:
        registers:
          x4:
            value: less_equal
          x5:
            value: 0
          x6:
            value: 0
      asm: |-
        .align 3
        table:
          .asciz "hello"
          .asciz "dog"
          .asciz "cat"
          .asciz "banana"
        telephone:
          .asciz "telephone"
          .asciz "supper"
